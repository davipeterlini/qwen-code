# ============================================
# Flow Proxy Configuration
# ============================================
# Este arquivo contém as variáveis de ambiente
# para configurar o proxy corporativo Flow

# Credenciais do Proxy Flow
FLOW_PROXY_USER=seu_usuario
FLOW_PROXY_PASSWORD=sua_senha

# Servidor Proxy Flow
FLOW_PROXY_HOST=proxy.flow.company.com
FLOW_PROXY_PORT=8080

# URL completa do proxy (gerada automaticamente)
HTTP_PROXY=http://${FLOW_PROXY_USER}:${FLOW_PROXY_PASSWORD}@${FLOW_PROXY_HOST}:${FLOW_PROXY_PORT}
HTTPS_PROXY=http://${FLOW_PROXY_USER}:${FLOW_PROXY_PASSWORD}@${FLOW_PROXY_HOST}:${FLOW_PROXY_PORT}

# Hosts que não devem usar proxy
NO_PROXY=localhost,127.0.0.1,*.local,*.internal,*.flow.company.com

# ============================================
# Configurações SSL/TLS
# ============================================

# Certificado CA corporativo Flow (opcional)
FLOW_CA_CERT_PATH=/path/to/flow-ca-bundle.crt
NODE_EXTRA_CA_CERTS=${FLOW_CA_CERT_PATH}

# Ignorar verificação SSL (apenas para desenvolvimento/debug)
# ATENÇÃO: Não use em produção!
# NODE_TLS_REJECT_UNAUTHORIZED=0

# ============================================
# Configurações de Timeout e Performance
# ============================================

# Timeout de conexão (ms)
PROXY_TIMEOUT=30000

# Timeout de requisição (ms)
REQUEST_TIMEOUT=60000

# Keep-alive
HTTP_KEEP_ALIVE=true

# Máximo de sockets simultâneos
MAX_SOCKETS=50

# ============================================
# Configurações de Retry
# ============================================

# Número máximo de tentativas
MAX_RETRIES=3

# Delay entre tentativas (ms)
RETRY_DELAY=1000

# ============================================
# Debug e Logging
# ============================================

# Habilitar logging de proxy
PROXY_LOGGING=false

# Nível de log (error, warn, info, debug, trace)
PROXY_LOG_LEVEL=info

# Debug detalhado (apenas para troubleshooting)
# NODE_DEBUG=http,https,tls

# ============================================
# Configurações Avançadas
# ============================================

# Auto-detectar configurações de proxy do sistema
PROXY_AUTO_DETECT=true

# Fallback para conexão direta se proxy falhar
PROXY_FALLBACK_DIRECT=false

# Cache de credenciais
PROXY_CACHE_CREDENTIALS=true

# ============================================
# Exemplos de Uso
# ============================================

# Para carregar estas configurações:
# source .qwen/.env.flow

# Para usar em linha de comando:
# export $(cat .qwen/.env.flow | grep -v '^#' | xargs)

# Para testar conexão através do proxy:
# curl -x $HTTP_PROXY https://api.openai.com
# curl -x $HTTP_PROXY https://dashscope.aliyuncs.com

# ============================================
# Troubleshooting
# ============================================

# Se tiver problemas de conexão, tente:
# 1. Verificar se o proxy está acessível:
#    telnet proxy.flow.company.com 8080
#
# 2. Testar autenticação:
#    curl -x http://usuario:senha@proxy.flow.company.com:8080 https://www.google.com
#
# 3. Verificar certificados SSL:
#    openssl s_client -connect proxy.flow.company.com:8080 -showcerts
#
# 4. Habilitar debug:
#    export NODE_DEBUG=http,https,tls
#    export PROXY_LOG_LEVEL=debug
